<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://skynet.im/js/skynet.js"></script>

<script>

var conn = skynet.createConnection({
  server: 'ws://meshblu.octoblu.com',
  port:80
});

var seinfeldEpisode = 'George: So, Marcy, you shouldve seen me in the hot tub yoday.\nMarcy: Why?\nGeorge: I was naked.\nMarcy: Oh, George.\nJerry: I saw it.\nMarcy: Howd he look?\nJerry: Okay. I wouldnt see it again.\nMarcy: You know, a friend of mine thought she got Legonares disease in the hot tub.\nGeorge: Really? What happened?\nMarcy: Oh, yada yada yada, just some bad egg salad. Ill be right back. (She gets up)\nJerry: I noticed shes big on the phrase "yada yada."\nGeorge: Is "yada yada" bad?\nJerry: No, "yada yada" is good. Shes very succinct.\nGeorge: She is succinct.\nJerry: Yeah, its like youre dating USA Today. (Tim the dentist enters Monks)\nGeorge: Hey.\nJerry: Hey, George, you know Tim Whatley.\nGeorge: Yeah, dentist of the stars.\nJerry: Whats up?\nTim: Ill tell you whats up. Im a Jew.\nJerry: Excuse me?\nTim: Im a Jew. I finished converting two days ago.\nJerry: Well... (Thinking of something to say) Welcome aboard.\nTim: Thanks.\nGeorge: Hey, where you just at the health club?\nTim: Oh, well, I didnt do much. I just sat in the sauna. You know, it was more like a Jewish workout. Ill see ya. (Jerry and George give confused looks)\n% Elaine and Jerry at his place.\nJerry: Elaine, the guys Jewish two days, hes already making Jewish jokes.\nElaine: So what? When someone turns twenty-one, they usually get drunk the first night.\nJerry: Booze is not a religion.\nElaine: Tell that to my father. Anyway, guess what? Beth Lookner called me.\nJerry: Ooh. Beth Lookner, still waitin out hat marriage.\nElaine: What are you talking about? That marriage ended six months ago. Shes already remarried.\nJerry: I gotta get on that internet. Im late on everything.\nElaine: Anyway, Beth and her new husband Arnie have listed me a reference for an adoption agency. Theyre trying to get a baby. (Kramer and Mickey enter wearing the same shirt)\n \nKramer: Elaine, all right, who looks better in this shirt? Me or Mickey?\nMickey: Were double dating tonight, and if we wear the same shirt well look like idiots.\nElaine: Hmm, turn around. (They turn around) Both so striking.\nKramer: Tell me about it. We just picked up two women at the Gap.\nElaine: How did you decide which one of you would date which girl? (They pause then look at each other)\n% Marcy and George in his car.\nMarcy: So Im on 3rd Avenue, mindin my own business, and, yada yada yada, I get a free massage and a facial.\nGeorge: What a succinct story.\nMarcy: Im surprised you drive a Cadillac.\nGeorge: Oh, its not mine. Its my mothers.\nMarcy: Are you close with your parents?\nGeorge: Well, they gave birth to me, and, yada yada...\nMarcy: Yada what?\nGeorge: Yada yada yada...\n% At Mickey and Kramers date.\nKaren: (To Mickey, wearing the shirt Elaine looked at for them) I like your shirt.\nMickey: Oh, thank you. Its 100% cotton, and some wool.\nKramer: Well, you too seem to have the same taste.\nJulie: Well I like it, too.\nKramer: Well I have the same shirt.\nMickey: Yeah, well Im wearin it.\nJulie: I like your shirt too.\nKaren: Oh, so do I.\nKramer: Oh. (Waiter approaches table)\nWaiter: Anything to drink? Some wine, perhaps.\nMickey: I like Merlot.\nKaren: I love Merlot.\nJulie: Im crazy about Merlot.\nKramer: I live for Merlot.\nWaiter: Were out of Merlot.\n% Cut to the adoption agency.\nAgent: So you, uh, know Betha and Arnie pretty well?\nElaine: Oh, yeah, yeah.\nAgent: Do you socialize with them often?\nElaine: Yeah, we got out to dinner a lot. Usually Chinese, well sometimes Thai. And we go to the movies, Arnies a real film buff.\nAgent: Oh.\nElaine: Actually, I remember this one time, um, this is funny. Um, we went to see the movie Striptease. I dont know if youve seen... doesnt matter. Anyway, I was whispering something to Beth, and Arnie leens over to me, and he goes, "Would you SHUT UP?!" I mean, he barely even knew me. Where did he get ah-- But theyre nice people. (Elaine tries to smile realizing her mistake)\n% Jerry is in the dental chair when George enters.\nGeorge: Oh, youre in here.\nJerry: Whatre you doing here?\nGeorge: I knew you had an appointment.\nJerry: Well this is very awkward.\nGeorge: Ill leave when the guy comes in. I gotta tell you, I am loving this yada yada thing. You know, I can cross over my whole life story. (Picks up dental tool)\nJerry: Hey, you dont play with that. Thats going in my mouth.\nGeorge: Hey, what this thing? Whew!\nJerry: All right, thats enough. Now get going. Get outta here. (Tim and his staff enter)\nGeorge: Hey, Tim. Quick question. Is it normal for your teeth to make noises, like a hissing or a chirping?\nJerry: George...\nTim: Um...\nGeorge: Fine, Ill make an appointment. (He leaves)\nTim: All right, it is cavity time. Ah, here we go. Which reminds me, did you here the one about the rabbi and the farmers daughter? Huh?\nJerry: Hey.\nTim: Those arent mahtzah balls.\nJerry: Tim, do you think you should be making jokes like that?\nTim: Why not? Im Jewish, remember?\nJerry: I know, but...\nTim: Jerry, its our sense of humor that sustained us as a people for 3000 years.\nJerry: 5000.\nTim: 5000, even better. Okay, Chrissie. Give me a schtickle of flouride.\n% Jerry and Elaine at Jerrys apartment.\nJerry: And then he asked the assistant for a schtickle of flouride.\nElaine: Why are you so concerned about this?\nJerry: Ill tell you why. Because I believe Whatley converted to Judaism just for the jokes. (Phone rings)\n \nPhone: Would you be interested in a subscription to the New York Times?\nJerry: Yes. (Slams down phone. Kramer and Mickey enter)\nKramer: I dont believe that.\nMickey: If you had gotten into the backseat of the car we couldve figured this whole thing out.\nKramer: Why were you holding the door open for?\nMickey: Not for you! Who holds a door open for a man?\nKramer: Well, I thought it was a nice gesture. But I guess I was wrong!\nMickey: Lets just put theyre names in a hat.\nKramer: I dont even know their names! Look, why dont you just take the one that was on the left?\nMickey: Im not sure she was my type.\nKramer: Oh, everybodys your type.\nMickey: What the hell does that mean?\nKramer: Youve been married three times.\nMickey: Thats it, its go time! (Charges toward Kramer, only to be held back by Jerry and Elaine)\nJerry: All right, take it easy.\nElaine: Hey, hey, hey!\nKramer: Come on, let him go. You want throw? Lets throw!\nElaine: Hey! Hold on a second. All right, look, I got an idea. Why dont you just show up early for your next date, sit across from each other, and see who the girls sit next to.\nMickey: Thats not bad.\nKramer: All right, so we let the girls decide.\nMickey: Yeah, why should we knock ourselves out?\nKramer: Yeah, I wanna wear that shirt next time.\nMickey: No, no one wears the shirt next time.\nKramer: Thats right, cause they already saw it.\nMickey: Well look like idiots. (They exit)\n% George and Marcy at Monks.\nGeorge: Well, we were engaged to be married, uh, we bought the wedding invitations, and, uh, yada yada yada, Im still single.\nMarcy: So whats she doing now?\nGeorge: Yada.\nMarcy: Speaking of exs, my old boyfriend came over late last night, and, yada yada yada, anyway. Im really tired today.\n% Beth and Arnie see Elaine walking down the street.\nElaine: Beth, Arnie, hi. Whats up?\nArnie: Well our adoption application was denied.\nElaine: Really.\nBeth: The adoption agent seems to feel that Arnie has a violent temper.\nElaine: Oh.\nBeth: So were just asking our friends what they may have said to the adoption agent.\nElaine: Uh, you know, I just told them what kind people you are and, uh, yada yada yada, that is it.\n% Cut to the dentist waiting room.\nJerry: How you doing?\nFather: I have a discomfort in my molar. (Enter Tim)\nTim: Well, the Curtis, why dont you come in? (To Jerry) Father Curtis, good guy. Oh, which reminds me, did you hear the one about the Pope and Raquel Welch on the lifeboat, huh? Ill tell you later. (Exits)\nJerry: Whatley. (Like "Newman")\n% At Kramer and Mickeys date, they enter to find the girls already at the table.\nKramer: What are they doing here?\nMickey: I told you we shouldve gotten here a half hour early.\nKramer: All right, all right. Now whatre we gonna do?\nMickey: All right, dont panic. Lets just decide now. Which one do you want?\nKramer: All right, Ill take Julie.\nMickey: I knew you wanted her. Thats who I wanted.\nKramer: All right, Ill take Karen.\nMickey: No, no, you think Im fallin for that? Ill take Karen.\nKramer: All right, which one is Julie? (They walk over to the table and fight over who sits where) Hey, you ladies look lovely tonight. (Continue to struggle)\n% Jerrys.\nJerry: So Whatley sayd to me, "Hey, I can make Catholic jokes, I used to be Catholic."\nElaine: You see, I dont think it is a Catholic joke. I think its more of a Raquel Welch joke. What was it? No, I said hand me the buoys. (Laughing) Bouys!\nJerry: Dont you see what Whatley is after? Total joke telling immunity. Hes already got the two big religions covered, if he ever gets Polish citizenship therell be no stopping him.\nElaine: So whatre you gonna do?\nJerry: I think this Father Curtis might be very interested to hear what Whatley has the Pope doing with Raquel Welch.\nElaine: (Calling on phone) Hey, Beth, Arnie, its Elaine. Um, thought you guys might wanna have lunch. Gimme a call. Bye.\nJerry: Theyre not getting a baby so youre taking them out to lunch?\nElaine: Thought it would be nice.\nJerry: Poor Beth.\nElaine: Hey, Arnies just as upset.\nJerry: Oh screw him! (George enters)\nGeorge: Listen to this. Marcy comes up and she tells me her ex-boyfriend was over late last night, and "yada yada yada, Im really tired today." You dont think she yada yadad sex.\nElaine: (Raising hand) Ive yada yadad sex.\nGeorge: Really?\nElaine: Yeah. I met this lawyer, we went out to dinner, I had the lobster bisk, we went back to my place, yada yada yada, I never heard from him again.\nJerry: But you yada yadad over the best part.\nElaine: No, I mentioned the bisk.\nGeorge: Well, I gotta do somethin. (Walks over to bathroom. Kramer enters)\nKramer: Well, I gotta do somethin.\nJerry: George is already in there.\nKramer: (Confused) No, Mickey and I, we cant work it out. You know, Im thinking of asking that Karen out by myself.\nJerry: I thought you were leaning towards Julie.\nKramer: I was, but the one I thought was Julie turned out to be Karen.\n% George and Marcy at Monks.\nGeorge: Well it was a helluva yada yada.\nMarcy: Hes moving to Seattle. We wanted to say goodbye, I was just getting out of the shower, and yada yada yada--\nGeorge: All right, enough! Enough! From now on, no more yada yadas. Just give me the full story.\nMarcy: Okay.\nGeorge: Tell me about the free facial.\nMarcy: Okay, well, like I said I was on 3rd Avenue, and I stopped by a large department store.\nGeorge: Which one?\nMarcy: Bloomingdales.\nGeorge: Very good. Go on.\nMarcy: Oh, and I stole a Piaget watch.\nGeorge: Whats that?\nMarcy: And then, I was on such a... high, that I went upstairs to the salon on the fifth floor, and got a massage and facial, and skipped out on the bill.\nGeorge: Shoplifting.\nMarcy: Well, what about you? You told me that you were engaged. What was the rest of that? (Pause)\n% Jerry at the church approaches a nun.\nJerry: Excuse me, Mother?\nNun: Sister.\nJerry: Sister, right. Do you know when Father Curtis has office hours?\nNun: Well not until tomorrow.\nJerry: Hmm, I really need to speak with him.\n% Jerry enters confessional, sits down on kneeler. Father Curtis opens sliding door.\nFather: Thats a kneeler.\nJerry: Oh. (Adjusts accordingly)\nFather: Tell me your sins, my son.\nJerry: Well I should tell you that Im Jewish.\nFather: Thats no sin.\nJerry: Oh good. Anyway, I wanted to talk to you about Dr. Whatley. I have a suspicion that hes converted to Judaism just for the jokes.\nFather: And this offends you as a Jewish person.\nJerry: No, it offends me as a comedian. And itll interest you that hes also telling Catholic jokes.\nFather: Well.\nJerry: And theyre old jokes. I mean, the Pope and Raquel Welch in a lifeboat.\nFather: I havent heard that one.\nJerry: Oh, Im sure you have. Theyre out on the ocean and, yada yada yada, and she says, "Those arent buoys." (Father starts laughing) Father...\nFather: One second... Well, if it would make you feel better I could speak to Dr. Whatley. I have to go back and have a wisdom teeth removed.\nJerry: You know the difference between a dentist and a sadist dont you?\nFather: Um...\nJerry: Newer magazines.\nFather: Now if youll excuse me. (Closes door. George enters confessional.)\nGeorge: Jerry, I gotta talk to you.\n% Kramer knocks on Karens apartment door, she opens the door.\nKramer: Hi.\nKaren: Hi, Kramer.\nKramer: Got a minute?\nKaren: Uh, actually my parents are over, but, would you like to meet them?\nKramer: Sure.\nKaren: (Parents enter and are little people like Mickey) Mom, Dad.\nKramer: Hi.\n% At Monks, Arnie is talking to Elaine.\nArnie: Elaine, I have to ask you something. What exactly happened down there?\nElaine: Well, I dont know. I mean, I talked to him and, blah blah blah, he asked about you guys and, da da da da da, more questions, bleh bleh bleh....\nArnie: All right, shut up!\nElaine: Again you are telling me to shut up?\nArnie: What?\nElaine: You yelled that time at the movies. Thats why youre not getting the baby.\nArnie: Oh my God. How am I gonna tell Beth?\nElaine: Look, Ill go down and talk to this adoption guy and Ill make sure that it all gets worked out.\nArnie: All right, just dont screw it up this time! (He exits)\nElaine: See, again with the yelling. Not a fan of the yelling.\n% At the dentist, Tim is working on Jerry.\nJerry: (In pain) Oh, are you about done?\nTim: Im just getting warmed up. Because Im just a sadist with newer magazines.\nJerry: Huh?\nTim: Father Curtis told me about your little joke.\nJerry: What about all your Jewish jokes?\nTim: Im Jewish, youre not a dentist. You have no idea what my people have been through.\nJerry: The Jews?\nTim: No, the dentists. You know, we have the highest suicide rate of any profession?\nJerry: Is that why its so hard to get an appointment?\n% Jerry enters his apartment to see Kramer talking on his phone.\nKramer: So, Ill uh... all right. (Hangs up)\nJerry: Date with Karen?\nKramer: No, Julie. Shes the one.\nJerry: What happened to Karen?\nKramer: Well, Mickey and her have a lot more in common. you know her parents are little people?\nJerry: Oh, small world. So little people can have not little people children?\nKramer: Oh yeah, and vice versa. Mother Natures a mad scientist, Jerry.\nJerry: So you wont believe what happened with Whatley today. It got back to hime that I made this little dentist joke and he got all offended. Those people can be so touchy.\nKramer: Those people, listen to yourself.\nJerry: What?\nKramer: You think that dentists are so different from me and you? They came to this country just like everybody else, in search of a dream.\nJerry: Kramer, hes just a dentist.\nKramer: Yeah, and youre an anti-dentite.\nJerry: I am not an anti-dentite!\nKramer: Youre a rabid anti-dentite! Oh, it starts with a few jokes and some slurs. "Hey, denty!" Next thing you know youre saying they should have their own schools.\nJerry: They do have their own schools!\nKramer: Yeah!\n% At the adoption agency...\nElaine: One little baby, whatever you have in stock.\nAgent: Miss Benes...\nElaine: Look it, look it, Ryan. These people are gettin a baby. Period. Now we can do this the easy way, or we can do this the fun way.\n% Beth enters Jerrys place.\nBeth: Jerry, Im sorry to bother you, but you always said youd be there for me.\nJerry: Well, whats wrong?\nBeth: Im thinking of leaving Arnie.\nJerry: Talk to me.\nBeth: He met with Elaine, and I asked him what happened, and he yada yadad me. I mean, could he be having an affair?\nJerry: Well, I wouldnt put anything past anybody.\nBeth: But we just got married.\n \nJerry: Well obviously that was a mistake. You need to forget about Arnie. The important thing is youre moving on.\nBeth: Why would Elaine do that to me?\nJerry: Forget about Elaine. Lets just focus on us. Come on, big hug. (Mickey and Karen enter)\nMickey: Hey Jerry. Wheres Kramer? Ive got exciting news.\nJerry: Im kinda in the middle of something.\nMickey: Karen and I are getting married.\nJerry: Oh, congratulations. Her marriage just fell apart.\nMickey: (To Beth) How many is that for you?\nBeth: Two.\nMickey: Youre a lightweight. Come on, honey.\n% One week later at the wedding. Elaine is sitting with adoption agent. Jerry enters with Beth.\nElaine: Hey Jerry. What are you doing here with Beth?\nJerry: Beth and Arnie broke up.\nElaine: So they dont want a baby?\nJerry: (Shaking his head no) Pff.\nElaine: (Realizes her mistake) I think Im gonna be sick. (George enters alone)\nJerry: Hey, wheres Marcy?\nGeorge: She, uh, went shopping for some shoes for the wedding and, yada yada yada, Ill see her in six to eight months. (Kramer and Julie enter)\nJerry: Hey, Kramer, over here.\nKramer: I just assume not sit next to you.\nJerry: Kramer... Oh look, theres Mickey and his parents.\nElaine: Nice looking family.\nJerry: Very handsome.\nKramer: (To Mr. Abbott) How ya doing?\nMr. Abbott: Hey Kramer.\nJulie: Oh Mickey. Excuse me, I cant take this. (She exits quickly)\nJerry: Hi, Mr. Abbott.\nMr. Abbott: Thats Dr. Abbott, D.D.S. Tim Whatley was one of my students. And if this wasnt my sons wedding day, Id knock you teeth out you anti-dentite bastard.\nBeth: What was that all about?\nJerry: Oh, I said something about dentists and it got blown all out of proportion.\nBeth: Hey, what do you call a doctor who fails out of med school?\nJerry: What?\nBeth: A dentist. (They laugh)\nJerry: Thats a good one. Dentists.\nBeth: Yeah, who needs em? Not to mention the Blacks and the Jews. (Jerry fakes a smile)\n% A little later.\nElaine: Wheres Beth?\nJerry: She went out to get her head shaved.\nFather: We are gathered her today to unite this couple in holy... matrimony.\nJerry: Those wisdom teeth are tough to get out.\nFather: Marriage is not an intervention to be entered lightly... Yada yada yada, I pronounce you man and wife. (They kiss, walk toward exit)\nKaren: (To Kramer) I really wanted you.';



var eachLine = [];
var thisLine = '';

for (var character = 0; character<seinfeldEpisode.length; character++){
  if (seinfeldEpisode[character] != '\n'){
    thisLine+=seinfeldEpisode[character];
  }
  else{
    eachLine.push(thisLine);
    thisLine='';
  }
}

var charactersNames = ['George','Jerry','Marcy','Elaine','Kramer','Mickey'];
var charactersColors = {
  'George': 0xFF0000,
  'Jerry':  0x00FF00, 
  'Marcy':  0x0000FF,
  'Elaine': 0xFFFF00,
  'Kramer': 0x00FFFF,
  'Mickey': 0xFF00FF,
};

var colorReturn = function(lineOfDialogue){
  colorToReturn = { hue: 0xFFFFFF, sat:0xFFFFFF, white: 5000, lum: 0x8000, bulbName: 'b10' };
  for (var nameIndex= 0; nameIndex< charactersNames.length; nameIndex++){
    if (lineOfDialogue.substr(0,charactersNames[nameIndex].length) === charactersName[nameIndex]){
      colorToReturn = charactersNames[nameIndex];
    }
  }
  return colorToReturn;
}
  for (var lightBulb = 1; lightBulb < 11; lightBulb++){
    // ON
    conn.message({
        "devices": "81165e42-422a-436a-832c-e4cf9fabbfd4",
    "subdevice": "lx",
     "payload": {setState: {
        on: true,
        bulbName: 'b'+lightBulb.toString()
      }
    }}, function(result){console.log('data',result)}); 
    // SET COLOR
    conn.message({
        "devices": "81165e42-422a-436a-832c-e4cf9fabbfd4",
      "subdevice": "lx",
      "payload": {
        setState: {
        hue: colorReturn(eachLine[iteration]),
          sat: 0xffff,
          white: 5000,
          lum: 0x8000,
          bulbName: 'b'+lightBulb.toString()
      }
    }}, function(result){console.log('data',result)}); 
  }

var iteration = 0;
setInterval(function(){
  conn.message({
    "devices": "81165e42-422a-436a-832c-e4cf9fabbfd4","subdevice": "aj",
    "payload": {method: "notify",message: eachLine[iteration]}
  }, function(result){console.log('data',result)}); 
  for (var lightBulb = 1; lightBulb < 11; lightBulb++){
    // OFF
    conn.message({
        "devices": "81165e42-422a-436a-832c-e4cf9fabbfd4",
    "subdevice": "lx",
     "payload": {setState: {
        on: false,
        bulbName: 'b'+lightBulb.toString()

      }
    // ON
    }}, function(result){console.log('data',result)}); 
    conn.message({
        "devices": "81165e42-422a-436a-832c-e4cf9fabbfd4",
    "subdevice": "lx",
     "payload": {setState: {
        on: true,
        bulbName: 'b'+lightBulb.toString()
      }
    }}, function(result){console.log('data',result)}); 
    // SET COLOR
    conn.message({
        "devices": "81165e42-422a-436a-832c-e4cf9fabbfd4",
      "subdevice": "lx",
      "payload": {
        setState: {
        hue: colorReturn(eachLine[iteration]),
          sat: 0xffff,
          white: 5000,
          lum: 0x8000,
          bulbName: 'b'+lightBulb.toString()
      }
    }}, function(result){console.log('data',result)}); 
  }

  iteration++;
},4000);

</script>

</head>

<body>
</body>
</html>